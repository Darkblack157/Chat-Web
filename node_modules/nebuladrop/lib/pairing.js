const { gerarCodigo } = require('./utils');
const sessions = {};

function criarPairing(user) {
    const code = gerarCodigo();
    sessions[code] = { user, valid: true };
    return code;
}

function emparelhar(code) {
    const registro = sessions[code];
    if (!registro || !registro.valid) return null;
    registro.valid = false;
    return { user: registro.user };
}

module.exports = { criarPairing, emparelhar, sessions };
